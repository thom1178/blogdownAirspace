---
title: "Where have I been?"
author: "Jamel Thomas"
date: "8/5/2018"
output: html_document
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<script src="/rmarkdown-libs/datatables-binding/datatables.js"></script>
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="/rmarkdown-libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet/leaflet.js"></script>
<link href="/rmarkdown-libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="/rmarkdown-libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="/rmarkdown-libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-binding/leaflet.js"></script>


<p>I began this blog in the summer of 2018, mostly because I needed a place to put all of the things I do for fun. What better way than to build your own website and put all that stuff there? I have come across this beautiful post from the D3js website. It creates a plot of where the author has been. I will recreate the same plot here, but with the leaflet package in R.</p>
<p>We will load in the data for the cities and states that Iâ€™ve lived.</p>
<pre class="r"><code>require(leaflet) #packages</code></pre>
<pre><code>## Loading required package: leaflet</code></pre>
<pre class="r"><code>require(DT)</code></pre>
<pre><code>## Loading required package: DT</code></pre>
<pre class="r"><code>require(rgdal)</code></pre>
<pre><code>## Loading required package: rgdal</code></pre>
<pre><code>## Loading required package: sp</code></pre>
<pre><code>## rgdal: version: 1.2-16, (SVN revision 701)
##  Geospatial Data Abstraction Library extensions to R successfully loaded
##  Loaded GDAL runtime: GDAL 2.1.2, released 2016/10/24
##  Path to GDAL shared files: /Library/Frameworks/R.framework/Versions/3.3/Resources/library/rgdal/gdal
##  GDAL binary built with GEOS: FALSE 
##  Loaded PROJ.4 runtime: Rel. 4.9.1, 04 March 2015, [PJ_VERSION: 491]
##  Path to PROJ.4 shared files: /Library/Frameworks/R.framework/Versions/3.3/Resources/library/rgdal/proj
##  Linking to sp version: 1.2-5</code></pre>
<pre class="r"><code>cities &lt;- read.csv(url, header = T)
DT::datatable(cities)</code></pre>
<div id="htmlwidget-1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8"],[0.1,9,2,4,2,0.5,0.4,6],["Riverside","Pomona","Glendora","Monterey","San Diego","Ontario","Claremont","Moreno Valley"],[33.980601,34.055103,34.136119,36.600238,32.715738,34.063344,34.096676,33.942466],[-117.375494,-117.749991,-117.865339,-121.894676,-117.161084,-117.650888,-117.719779,-117.229672]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>years<\/th>\n      <th>place<\/th>\n      <th>lat<\/th>\n      <th>lon<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row"}},"evals":[],"jsHooks":[]}</script>
<p>Leaflet comes with an easy to use pipeline: <code>%&gt;%</code>. For example, given two functions <code>as.character()</code> and <code>as.numeric()</code>, we could code this two different ways.</p>
<pre class="r"><code>x &lt;- factor(c(&quot;12.99&quot;, &quot;99.01&quot;, &quot;20&quot;))

#Method one:
as.numeric( as.character(x) )</code></pre>
<pre><code>## [1] 12.99 99.01 20.00</code></pre>
<pre class="r"><code>#Method two:

x %&gt;% as.character %&gt;% as.numeric</code></pre>
<pre><code>## [1] 12.99 99.01 20.00</code></pre>
<pre class="r"><code>#But incorrect output of factor to numeric
as.numeric(x)</code></pre>
<pre><code>## [1] 1 3 2</code></pre>
<p>This is important to note because we will utilize the pipe notation.</p>
<p>We have already loaded leaflet and the datasets, we just need to use them!</p>
<p>We will first load the leaflet base plot and add tiles:</p>
<pre class="r"><code>L &lt;- leaflet(data = cities) %&gt;% 
  addTiles()
L</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}]},"evals":[],"jsHooks":[]}</script>
<p>When we add out points, the mapview is automatically updated as well!</p>
<pre class="r"><code>L %&gt;%
  addCircles(lat = ~lat, lng = ~lon, radius = ~years*1000 , stroke = F, fillOpacity = .5)</code></pre>
<div id="htmlwidget-3" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircles","args":[[33.980601,34.055103,34.136119,36.600238,32.715738,34.063344,34.096676,33.942466],[-117.375494,-117.749991,-117.865339,-121.894676,-117.161084,-117.650888,-117.719779,-117.229672],[100,9000,2000,4000,2000,500,400,6000],null,null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.5},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null,null]}],"limits":{"lat":[32.715738,36.600238],"lng":[-121.894676,-117.161084]}},"evals":[],"jsHooks":[]}</script>
